<Window x:Class="iikoServiceHelper.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="iikoServiceHelper_v2" Height="600" Width="950" MinWidth="740" MinHeight="530" WindowStartupLocation="Manual"
        Background="#121212" Foreground="White" Icon="pack://application:,,,/Logo.ico"
        xmlns:sys="clr-namespace:System;assembly=mscorlib">
    <Grid Background="{DynamicResource BrushWindowBackground}">
        <Grid.Resources>
            <Style x:Key="Win11ToggleStyle" TargetType="{x:Type CheckBox}">
                <Setter Property="VerticalAlignment" Value="Center" />
                <Setter Property="Height" Value="10" />
                <Setter Property="Width" Value="20" />
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type CheckBox}">
                            <Grid>
                                <Border x:Name="Track" CornerRadius="5" Height="10" Background="{DynamicResource BrushCounterBackground}" BorderBrush="{DynamicResource BrushCounterBorder}" BorderThickness="1" />
                                <Border x:Name="Thumb" CornerRadius="4" Height="8" Width="8" Background="#FAFAFA" HorizontalAlignment="Left" Margin="1,0,0,0">
                                    <Border.Effect>
                                        <DropShadowEffect ShadowDepth="0.5" Direction="270" Color="Black" Opacity="0.2" BlurRadius="1"/>
                                    </Border.Effect>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="Track" Property="Background" Value="{DynamicResource BrushAccent}" />
                                    <Setter TargetName="Track" Property="BorderBrush" Value="{DynamicResource BrushAccent}" />
                                    <Trigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ThicknessAnimation Storyboard.TargetName="Thumb" Storyboard.TargetProperty="Margin" To="11,0,0,0" Duration="0:0:0.15">
                                                    <ThicknessAnimation.EasingFunction><CubicEase EasingMode="EaseOut" /></ThicknessAnimation.EasingFunction>
                                                </ThicknessAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.EnterActions>
                                    <Trigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ThicknessAnimation Storyboard.TargetName="Thumb" Storyboard.TargetProperty="Margin" To="1,0,0,0" Duration="0:0:0.15">
                                                    <ThicknessAnimation.EasingFunction><CubicEase EasingMode="EaseOut" /></ThicknessAnimation.EasingFunction>
                                                </ThicknessAnimation>
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </Trigger.ExitActions>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Thumb" Property="Background" Value="#E0E0E0"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <!-- Header / Title Area Decoration -->
        <Border Height="1" VerticalAlignment="Top" Margin="20,50,20,0" Background="#333333"/>

        <TabControl Background="Transparent" BorderThickness="0" Margin="10">
            <!-- Tab 1: Reference (ReadOnly) -->
            <TabItem Header="ÐšÐžÐœÐÐÐ”Ð«" PreviewMouseLeftButtonDown="CommandsTab_PreviewMouseLeftButtonDown">
                <Grid Margin="10,0,10,10">
                    <DataGrid x:Name="ReferenceGrid" AutoGenerateColumns="False" IsReadOnly="True" HeadersVisibility="Column" FontSize="14" SelectionUnit="Cell" Focusable="False"
                              AlternationCount="2" GridLinesVisibility="Horizontal" HorizontalGridLinesBrush="#333333" BorderThickness="0" RowHeight="33">
                        <DataGrid.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="Transparent"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="{DynamicResource BrushAccent}"/>
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="{DynamicResource BrushAccent}"/>
                            <LinearGradientBrush x:Key="ReversedGradientBrush" StartPoint="1,1" EndPoint="0,0">
                                <GradientStop Color="#150020" Offset="0.0"/>
                                <GradientStop Color="#1A0029" Offset="1.0"/>
                            </LinearGradientBrush>
                        </DataGrid.Resources>
                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Background" Value="{StaticResource ReversedGradientBrush}" />
                                <Style.Triggers>
                                    <Trigger Property="AlternationIndex" Value="1">
                                        <Setter Property="Background" Value="#150020" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Ð¡ÐžÐ§Ð•Ð¢ÐÐÐ˜Ð•" Binding="{Binding Keys}" Width="250">
                                <DataGridTextColumn.CellStyle>
                                    <Style TargetType="DataGridCell" BasedOn="{StaticResource {x:Type DataGridCell}}">
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                        <Setter Property="FontWeight" Value="Bold"/>
                                    </Style>
                                </DataGridTextColumn.CellStyle>
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextAlignment" Value="Left"/>
                                        <Setter Property="Margin" Value="12,0,0,0"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                            <DataGridTextColumn Header="ÐžÐŸÐ˜Ð¡ÐÐÐ˜Ð•" Binding="{Binding Desc}" Width="*">
                                <DataGridTextColumn.CellStyle>
                                    <Style TargetType="DataGridCell" BasedOn="{StaticResource {x:Type DataGridCell}}">
                                        <Setter Property="ToolTip" Value="{Binding FullCommand}" />
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.CellStyle>
                                <DataGridTextColumn.ElementStyle>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                                        <Setter Property="TextAlignment" Value="Left"/>
                                        <Setter Property="Margin" Value="12,0,0,0"/>
                                        <Setter Property="VerticalAlignment" Value="Center"/>
                                    </Style>
                                </DataGridTextColumn.ElementStyle>
                            </DataGridTextColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>

            <!-- Tab 2: Notes -->
            <TabItem Header="Ð—ÐÐœÐ•Ð¢ÐšÐ˜">
                <Grid Margin="3">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,-5,0,0">
                        <Button Content="ðŸ”+" Click="BtnZoomIn_Click" Width="24" Height="24" Margin="1" Padding="0" FontSize="10" ToolTip="Ð£Ð²ÐµÐ»Ð¸Ñ‡Ð¸Ñ‚ÑŒ"/>
                        <Button Content="ðŸ”-" Click="BtnZoomOut_Click" Width="24" Height="24" Margin="1" Padding="0" FontSize="10" ToolTip="Ð£Ð¼ÐµÐ½ÑŒÑˆÐ¸Ñ‚ÑŒ"/>
                    </StackPanel>
                    <TextBox Grid.Row="1" x:Name="txtNotes" Style="{StaticResource ThemedTextBox}" AcceptsReturn="True" TextWrapping="Wrap" 
                             VerticalScrollBarVisibility="Auto" LostFocus="txtNotes_LostFocus" Margin="0,10,0,10"/>
                </Grid>
            </TabItem>

            <!-- Tab 4: Custom Command Editor -->
            <TabItem x:Name="CommandEditorTab" Header="Ð Ð•Ð”ÐÐšÐ¢ÐžÐ  ÐšÐžÐœÐÐÐ”" Visibility="Collapsed">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <DataGrid x:Name="CustomCommandsGrid" Grid.Row="0" AutoGenerateColumns="False" CanUserAddRows="False" FontSize="12" BeginningEdit="CustomCommandsGrid_BeginningEdit">
                        <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow" BasedOn="{StaticResource {x:Type DataGridRow}}">
                                <Setter Property="Background" Value="Transparent"/>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderBrush" Value="Transparent"/>
                                    </Trigger>
                                    <DataTrigger Binding="{Binding IsReadOnly}" Value="True">
                                        <Setter Property="Foreground" Value="Gray"/>
                                        <Setter Property="ToolTip" Value="Ð­Ñ‚Ð¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°, ÐµÐµ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¾."/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Ð¡ÐžÐ§Ð•Ð¢ÐÐÐ˜Ð•" Width="150">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Trigger}" VerticalAlignment="Center" Margin="5,0"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <TextBox Style="{StaticResource ThemedTextBox}" Text="{Binding Trigger, UpdateSourceTrigger=PropertyChanged}" 
                                                 GotFocus="HotkeyTextBox_GotFocus" LostFocus="HotkeyTextBox_LostFocus"
                                                 IsReadOnly="True" IsReadOnlyCaretVisible="False"
                                                 ToolTip="ÐšÐ»Ð¸ÐºÐ½Ð¸Ñ‚Ðµ Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ ÑÐ¾Ñ‡ÐµÑ‚Ð°Ð½Ð¸Ðµ ÐºÐ»Ð°Ð²Ð¸Ñˆ Ð´Ð»Ñ Ð·Ð°Ð¿Ð¸ÑÐ¸."/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="ÐžÐŸÐ˜Ð¡ÐÐÐ˜Ð•" Width="250">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Description}" VerticalAlignment="Center" Margin="5,0"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <TextBox Style="{StaticResource ThemedTextBox}" Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                            <DataGridComboBoxColumn Header="Ð¢Ð˜ÐŸ" SelectedItemBinding="{Binding Type}" Width="100">
                                <DataGridComboBoxColumn.ElementStyle>
                                    <Style TargetType="ComboBox" BasedOn="{StaticResource ThemedComboBox}">
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsReadOnly}" Value="True">
                                                <Setter Property="IsEnabled" Value="False"/>
                                                <Setter Property="Opacity" Value="0.6"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </DataGridComboBoxColumn.ElementStyle>
                                <DataGridComboBoxColumn.EditingElementStyle>
                                    <Style TargetType="ComboBox" BasedOn="{StaticResource ThemedComboBox}"/>
                                </DataGridComboBoxColumn.EditingElementStyle>
                                <DataGridComboBoxColumn.ItemsSource>
                                    <x:Array Type="sys:String">
                                        <sys:String>Reply</sys:String>
                                        <sys:String>Bot</sys:String>
                                        <sys:String>System</sys:String>
                                    </x:Array>
                                </DataGridComboBoxColumn.ItemsSource>
                            </DataGridComboBoxColumn>
                            <DataGridTemplateColumn Header="Ð¡ÐžÐ”Ð•Ð Ð–Ð˜ÐœÐžÐ•" Width="*">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Content}" TextWrapping="NoWrap" TextTrimming="CharacterEllipsis" VerticalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <TextBox Style="{StaticResource ThemedTextBox}" Text="{Binding Content, UpdateSourceTrigger=PropertyChanged}" 
                                                 AcceptsReturn="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" MaxHeight="100"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button Content="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ" Click="AddCustomCommand_Click" Width="120"/>
                        <Button Content="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Click="DeleteCustomCommand_Click" Width="120"/>
                        <Button Content="Ð¡Ð±Ñ€Ð¾Ñ" Click="ResetCustomCommands_Click" Width="120"/>
                        <Button Content="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¸ Ð¿Ñ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ" Click="SaveCustomCommands_Click" Width="200" FontWeight="Bold"/>
                    </StackPanel>
                </Grid>
            </TabItem>
            
             <!-- Tab 3: Tools -->
            <TabItem Header="Ð˜ÐÐ¡Ð¢Ð Ð£ÐœÐ•ÐÐ¢Ð«">
                <StackPanel Margin="20,5,20,20">
                     <TextBlock Text="Ð”ÐžÐ¡Ð¢Ð£ÐŸÐÐ«Ð• Ð£Ð¢Ð˜Ð›Ð˜Ð¢Ð«" Foreground="#666666" FontSize="12" FontWeight="Bold" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                     <Grid Margin="0,0,0,10">
                         <Grid.ColumnDefinitions>
                             <ColumnDefinition Width="Auto"/>
                             <ColumnDefinition Width="*"/>
                             <ColumnDefinition Width="Auto"/>
                         </Grid.ColumnDefinitions>
                         <StackPanel Grid.Column="0">
                             <Button Content="OrderCheck" Click="OpenOrderCheck_Click" HorizontalAlignment="Left" Width="250" Margin="0,0,0,5"/>
                             <Button Content="CLEAR.bat" Click="OpenClearBat_Click" HorizontalAlignment="Left" Width="250" Margin="0"/>
                         </StackPanel>
                         <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                             <Button Content="POS-Ð½Ð¸Ðº M1" Click="BtnCopyPosM1_Click" Width="150" Margin="0,0,0,5"/>
                             <Button Content="POS-Ð½Ð¸Ðº M" Click="BtnCopyPosM_Click" Width="150" Margin="0"/>
                         </StackPanel>
                         <StackPanel Grid.Column="2">
                             <Button Content="FTP" Click="OpenFtp_Click" Width="250" Height="20" FontSize="14" Padding="0" ToolTip="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ \\files.resto.lan\" HorizontalAlignment="Right" Margin="0,0,0,5"/>
                             <Button Content="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð»Ð¾Ð³ Helpera" Click="OpenLogFolder_Click" HorizontalAlignment="Right" Width="250" Height="20" FontSize="14" Padding="0" ToolTip="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð¿Ð°Ð¿ÐºÑƒ Ñ Ð»Ð¾Ð³Ð°Ð¼Ð¸" Margin="0"/>
                         </StackPanel>
                     </Grid>

                     <StackPanel Orientation="Horizontal" Margin="5,20,0,10">
                         <TextBlock Text="ÐÐ’Ð¢Ðž-Ð’Ð¥ÐžÐ” CRM (30 ÐœÐ˜Ð)" Foreground="#666666" FontSize="12" FontWeight="Bold"/>
                         <TextBlock Text="Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ñ‚Ñ‹ÐºÐ½Ð¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°!" Foreground="{DynamicResource BrushAccent}" FontSize="12" Margin="10,0,0,0" FontWeight="Bold"/>
                         <TextBlock x:Name="txtLastRun" Foreground="#888888" FontSize="12" Margin="10,0,0,0"/>
                     </StackPanel>
                     
                     <StackPanel Orientation="Horizontal" Margin="5,0,0,5">
                         <TextBlock Text="Ð›Ð¾Ð³Ð¸Ð½:" VerticalAlignment="Center" Foreground="#666666" Margin="0,0,5,0" Width="45"/>
                         <TextBox x:Name="txtCrmLogin" Style="{StaticResource ThemedTextBox}" Width="150" Margin="0,0,15,0" ToolTip="Ð›Ð¾Ð³Ð¸Ð½ Ð´Ð»Ñ CRM" LostFocus="TxtCrm_LostFocus"/>
                         <TextBlock Text="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ:" VerticalAlignment="Center" Foreground="#666666" Margin="0,0,5,0"/>
                         <PasswordBox x:Name="txtCrmPassword" Style="{StaticResource ThemedPasswordBox}" Width="150" ToolTip="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð»Ñ CRM" LostFocus="TxtCrm_LostFocus"/>
                     </StackPanel>

                     <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                         <ComboBox x:Name="cmbBrowsers" Style="{StaticResource ThemedComboBox}" Width="140" Margin="5,5,10,5" Height="35"
                                   DisplayMemberPath="Name" SelectedValuePath="Path"
                                   DropDownOpened="CmbBrowsers_DropDownOpened" ToolTip="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€"/>
                         <Button Content="â†»" Click="BtnRefreshBrowsers_Click" Width="30" Height="35" Margin="0,5,10,5" Padding="0" ToolTip="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð¾Ð²" FontSize="18"/>
                         <Button x:Name="btnCrmAutoLogin" Content="Ð’ÐšÐ›Ð®Ð§Ð˜Ð¢Ð¬" Click="BtnCrmAutoLogin_Click" Width="100"/>
                         <Button Content="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°" Click="BtnCrmSettings_Click" Width="100"/>
                     </StackPanel>
                     <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,10,0">
                         <Button Content="ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚" Click="BtnCheckPort_Click" Width="100" Height="25" FontSize="11" Padding="0" ToolTip="ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ñ€Ñ‚Ð° 9222"/>
                     </StackPanel>
                     <TextBlock x:Name="txtCrmStatus" Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: ÐžÑ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾" Foreground="#555" FontSize="12" Margin="5,-30,0,0" HorizontalAlignment="Left"/>

                     <TextBlock Text="Ð›ÐžÐ“ Ð”Ð•Ð™Ð¡Ð¢Ð’Ð˜Ð™ CRM:" Foreground="#666666" FontSize="12" Margin="5,0,0,5" FontWeight="Bold"/>
                     <TextBox x:Name="txtLog" Style="{StaticResource ThemedTextBox}" Height="120" TextWrapping="Wrap" AcceptsReturn="True" VerticalScrollBarVisibility="Auto" IsReadOnly="True" FontFamily="Consolas" FontSize="11" Foreground="{DynamicResource BrushLogForeground}" Padding="5"/>
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Counter (Moved below TabControl to be on top in Z-order) -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,15,20,0">
            <CheckBox x:Name="chkAltBlocker" 
                      Content="Ð‘Ð»Ð¾Ðº Alt" 
                      IsChecked="True"
                      Click="ChkAltBlocker_Click"
                      VerticalAlignment="Center" 
                      Margin="0,0,15,0"
                      ToolTip="Ð‘Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ Ð¼ÐµÐ½ÑŽ Ð¿Ñ€Ð¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¸ Alt (Ð´Ð»Ñ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð¾Ð²)"/>
            
            <Border Background="{DynamicResource BrushCounterBackground}" BorderBrush="{DynamicResource BrushCounterBorder}" BorderThickness="1" CornerRadius="4" Padding="15,5">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº: " Foreground="{DynamicResource BrushCounterLabel}" FontSize="14" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock x:Name="txtCommandCount" Text="0" Foreground="{DynamicResource BrushCounterValue}" FontSize="16" FontWeight="Bold" VerticalAlignment="Center">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="{DynamicResource ColorAccent}" BlurRadius="8" ShadowDepth="0" Opacity="0.8"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <Button Content="â†º" Click="ResetCommandCount_Click" Margin="10,0,0,0" Padding="8,2" FontSize="14" VerticalAlignment="Center" ToolTip="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ ÑÑ‡ÐµÑ‚Ñ‡Ð¸Ðº"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Quick Replies Input Mode Selector -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="80,0,0,5">
            <TextBlock Text="Ð’Ð²Ð¾Ð´" VerticalAlignment="Center" Margin="0,0,5,0" FontSize="11">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground" Value="#888888"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=togglePasteMode, Path=IsChecked}" Value="False">
                                <Setter Property="Foreground" Value="{DynamicResource BrushAccent}"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <CheckBox x:Name="togglePasteMode"
                          IsChecked="False"
                          Click="TogglePasteMode_Click"
                          ToolTip="Ð ÐµÐ¶Ð¸Ð¼ Ð²Ð²Ð¾Ð´Ð° Ñ‚ÐµÐºÑÑ‚Ð°: Ð’Ð²Ð¾Ð´ (Ð²Ñ‹ÐºÐ») Ð¸Ð»Ð¸ Ð’ÑÑ‚Ð°Ð²ÐºÐ° (Ð²ÐºÐ»)"
                          Style="{StaticResource Win11ToggleStyle}" />
            <TextBlock Text="Ð’ÑÑ‚Ð°Ð²ÐºÐ°" VerticalAlignment="Center" Margin="5,0,0,0" FontSize="11">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground" Value="#888888"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=togglePasteMode, Path=IsChecked}" Value="True">
                                <Setter Property="Foreground" Value="{DynamicResource BrushAccent}"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </StackPanel>

        <!-- Update Link (Bottom Left) -->
        <TextBlock x:Name="txtUpdateLink" Text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" HorizontalAlignment="Left" VerticalAlignment="Bottom"
                   Margin="15,5,5,5" Foreground="#666666" FontSize="11" Cursor="Hand" MouseLeftButtonDown="TxtUpdateLink_Click">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Foreground" Value="{DynamicResource BrushAccent}"/>
                            <Setter Property="TextDecorations" Value="Underline"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>

        <!-- Update Progress -->
        <ProgressBar x:Name="pbUpdate" Width="150" Height="4" VerticalAlignment="Bottom" HorizontalAlignment="Center"
                     Margin="0,0,0,10" Visibility="Collapsed"
                     Background="#25252A" BorderBrush="#3E3E42" Foreground="{DynamicResource BrushAccent}"/>

        <!-- Credits -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,5,5">
            <Button Content="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñ‹" Click="BtnResetThemes_Click"
                    Height="20" Padding="5,0" Margin="0,0,10,0"
                    FontSize="11" BorderThickness="0" Background="Transparent" Foreground="#666666"
                    ToolTip="Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ†Ð²ÐµÑ‚Ð° Ñ‚ÐµÐ¼ Ðº Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÑÐ¼ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ.&#x0a;Ð’Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ: ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ñ†Ð²ÐµÑ‚Ð¾Ð² Ð±ÑƒÐ´ÑƒÑ‚ ÑƒÑ‚ÐµÑ€ÑÐ½Ñ‹!"/>
            <Button x:Name="btnThemeSwitch" Content="â˜€" Click="BtnThemeSwitch_Click"
                    Width="20" Height="20" Padding="0" Margin="0,0,10,0"
                    FontSize="12" BorderThickness="0" Background="Transparent" Foreground="#666666"
                    ToolTip="Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‚ÐµÐ¼Ñƒ (Ð¡Ð²ÐµÑ‚Ð»Ð°Ñ/Ð¢ÐµÐ¼Ð½Ð°Ñ)"/>
            <TextBlock Text="by Yustus  " VerticalAlignment="Center"
                       Foreground="#666666" FontSize="11" IsHitTestVisible="False"/>
        </StackPanel>
    </Grid>
</Window>